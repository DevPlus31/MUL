# MUL (Minimal UI Language) Specification

[![Version](https://img.shields.io/badge/version-0.4.0-blue.svg)](https://github.com/your-org/mul)
[![Status](https://img.shields.io/badge/status-draft-orange.svg)](https://github.com/your-org/mul)
[![License](https://img.shields.io/badge/license-MIT-green.svg)](LICENSE)

> A declarative, semantic UI description language optimized for AI/LLM generation and human readability.

## Table of Contents

- [Introduction](#introduction)
- [Quick Start](#quick-start)
- [Design Principles](#design-principles)
- [Syntax Overview](#syntax-overview)
- [Core Elements](#core-elements)
- [Modifiers System](#modifiers-system)
- [Layout System](#layout-system)
- [Data Binding](#data-binding)
- [Control Flow](#control-flow)
- [Platform Targets](#platform-targets)
- [LLM Integration](#llm-integration)
- [Examples](#examples)
- [Implementation Guidelines](#implementation-guidelines)
- [Contributing](#contributing)
- [Roadmap](#roadmap)

## Introduction

MUL (Minimal UI Language) is a declarative, semantic UI description language that abstracts UI construction into natural, intent-based expressions. It's designed to be easily generated by AI/LLMs while remaining highly readable for humans.

### Goals

- **AI-First**: Optimized for Large Language Model generation
- **Platform Agnostic**: Single description, multiple targets (Web, Mobile, Desktop)
- **Semantic**: Intent over implementation
- **Minimal**: Reduced cognitive load and syntax overhead
- **Extensible**: Easy to add new components and modifiers

### Non-Goals

- Replace existing UI frameworks entirely
- Provide pixel-perfect layout control
- Support complex animations

## Quick Start

Here's a simple MUL example that creates a login form:

```mul
card elevated rounded spacious {
  title "Sign In" large center
  
  column normal {
    input "email" "Enter your email" required
    input "password" "Password" secret required
    
    button "Sign In" primary large {
      action authenticate
    }
    
    link "Forgot password?" "forgot-password"
  }
}
```

This compiles to clean, semantic UI code across multiple platforms.

## Design Principles

### 1. Semantic Over Visual
Elements describe purpose, not appearance:
```mul
button "Submit" primary    // Intent: primary action
// NOT: button color="#0066cc" padding="12px"
```

### 2. Natural Language Inspired
Syntax reads like simplified English:
```mul
card elevated rounded {
  title "Welcome" large bold
  text "Get started today"
}
```

### 3. Context Inheritance
Child elements inherit context from parents:
```mul
section "dashboard" dark {
  // All children inherit dark theme context
  card { ... }  // Automatically styled for dark theme
}
```

### 4. Hierarchical Composition
Complex UIs built from simple, composable parts:
```mul
page {
  header { ... }
  main { ... }
  footer { ... }
}
```

### 5. Error Tolerance
Graceful handling of syntax variations and missing elements.

## Syntax Overview

### Basic Structure
```
element_type [content] [modifiers] [block]
```

### Element Declaration
```mul
// Simple element
text "Hello World"

// Element with modifiers
title "Welcome" large bold primary

// Element with children
card elevated {
  title "Dashboard"
  text "Overview"
}
```

### Comments
```mul
// Single line comment
/* Multi-line
   comment */
```

### String Literals
```mul
text "Simple string"
text "String with \"escaped quotes\""
text "Multi-line string
      continues here"
```

## Core Elements

### Container Elements

| Element | Description | Example |
|---------|-------------|---------|
| `page` | Root container for an entire screen/view | `page "Home" { ... }` |
| `section` | Logical grouping of related content | `section "header" primary { ... }` |
| `card` | Elevated content container with visual separation | `card elevated rounded { ... }` |
| `panel` | General purpose container without default elevation | `panel "sidebar" { ... }` |

### Layout Elements

| Element | Description | Example |
|---------|-------------|---------|
| `row` | Horizontal arrangement | `row spacious { ... }` |
| `column` | Vertical arrangement | `column tight { ... }` |
| `grid` | Grid-based layout | `grid "3x2" loose { ... }` |
| `stack` | Overlapping elements (z-axis) | `stack { ... }` |
| `wrap` | Flowing layout that wraps | `wrap { ... }` |

### Content Elements

| Element | Description | Example |
|---------|-------------|---------|
| `text` | General text content | `text "Hello World" large bold` |
| `title` | Heading text with semantic importance | `title "Page Title" huge` |
| `subtitle` | Secondary heading | `subtitle "Secondary heading"` |
| `label` | Descriptive text for form elements | `label "Email Address" required` |
| `link` | Navigational or external links | `link "Learn More" "https://example.com"` |

### Interactive Elements

| Element | Description | Example |
|---------|-------------|---------|
| `button` | Clickable action element | `button "Submit" primary large` |
| `input` | Form input field | `input "email" "Enter your email" required` |
| `toggle` | Boolean switch control | `toggle "notifications" "Enable notifications" checked` |
| `slider` | Range input control | `slider "volume" min=0 max=100 value=50` |
| `select` | Dropdown selection | `select "country" { option "us" "United States" }` |

### Media Elements

| Element | Description | Example |
|---------|-------------|---------|
| `image` | Visual content display | `image "profile.jpg" circular large` |
| `icon` | Symbolic visual element | `icon "user" large primary` |
| `video` | Video content (basic support) | `video "demo.mp4" controls autoplay` |

### Data Elements

| Element | Description | Example |
|---------|-------------|---------|
| `list` | Collection of items | `list "tasks" { item "Complete project" checked }` |
| `table` | Structured data display | `table "users" { header { cell "Name" } }` |

## Modifiers System

Modifiers describe element variations without implementation details.

### Size Modifiers
- `tiny` - Minimal size
- `small` - Below default
- `medium` - Default size (implicit)
- `large` - Above default
- `huge` - Maximum size

```mul
text "Small text" small
title "Big Title" huge
button "Normal Button"  // medium is implicit
```

### Color Modifiers
- `primary` - Main brand color
- `secondary` - Supporting color
- `accent` - Highlight color
- `success` - Positive/confirmation
- `warning` - Caution/attention
- `error` - Negative/failure
- `neutral` - Neutral/muted

```mul
button "Save" primary
text "Error occurred" error
card secondary { ... }
```

### Style Modifiers
- `bold` - Heavy font weight
- `italic` - Italicized text
- `underline` - Underlined text
- `rounded` - Rounded corners
- `sharp` - Sharp/square corners
- `elevated` - Raised appearance (shadow)
- `flat` - No elevation
- `outlined` - Border emphasis
- `filled` - Solid background
- `ghost` - Minimal background

```mul
title "Bold Title" bold
card elevated rounded { ... }
button "Outlined" outlined secondary
```

### Layout Modifiers
- `center` - Center alignment
- `left` - Left alignment
- `right` - Right alignment
- `top` - Top alignment
- `bottom` - Bottom alignment
- `stretch` - Fill available space
- `wrap` - Allow wrapping
- `nowrap` - Prevent wrapping

```mul
text "Centered" center
row right { ... }
column stretch { ... }
```

### Spacing Modifiers
- `tight` - Minimal spacing
- `normal` - Default spacing (implicit)
- `loose` - Increased spacing
- `spacious` - Maximum spacing

```mul
column tight { ... }
row spacious { ... }
grid loose { ... }
```

### State Modifiers
- `active` - Currently active/selected
- `inactive` - Not active
- `disabled` - Not interactive
- `hidden` - Not visible
- `visible` - Explicitly visible
- `loading` - Loading state
- `readonly` - Read-only state
- `required` - Required field

```mul
button "Submit" disabled
input "email" required
text "Loading..." loading
```

### Responsive Modifiers
- `mobile` - Mobile screens only
- `tablet` - Tablet screens only
- `desktop` - Desktop screens only
- `mobile-hidden` - Hide on mobile
- `desktop-only` - Desktop only

```mul
text "Mobile only" mobile
card desktop-only { ... }
```

## Layout System

### Grid System
MUL uses a flexible grid system with natural descriptions:

```mul
// Fixed grid
grid "3x2" {  // 3 columns, 2 rows
  card { ... }
  card { ... }
  // ... 6 cards total
}

// Responsive grid
grid responsive {
  mobile: "1x6"
  tablet: "2x3" 
  desktop: "3x2"
}

// Auto-flowing grid
grid auto {
  // Automatically determines layout
}
```

### Flexbox-style Layouts
```mul
row spacious wrap {
  // Horizontal with space-between, allows wrapping
}

column center stretch {
  // Vertical, centered, fills height
}
```

### Positioning
```mul
stack {
  image "background.jpg"
  text "Overlay" center
  button "Action" bottom right
}
```

## Data Binding

### Variable References
```mul
text user.name large bold
image user.avatar circular
button "Edit" {
  action edit_user(user.id)
}
```

### Expressions
```mul
text "Welcome, {user.name}!" 
text "Items: {cart.items.length}"
text "Total: ${cart.total.toFixed(2)}" success
```

### Conditional Content
```mul
if user.isLoggedIn {
  button "Logout" secondary
} else {
  button "Login" primary
}
```

### Iterations
```mul
list "products" {
  for product in products {
    card {
      title product.name
      text "${product.price}" success
      button "Add to Cart" {
        action addToCart(product.id)
      }
    }
  }
}
```

## Control Flow

### Conditionals
```mul
// Simple condition
if condition {
  element { ... }
}

// If-else
if user.isPremium {
  text "Premium User" success
} else {
  text "Free User" neutral
}

// Multiple conditions
if user.role == "admin" {
  button "Admin Panel"
} else if user.role == "moderator" {
  button "Moderate"
} else {
  text "Regular User"
}
```

### Loops
```mul
// Simple iteration
for item in items {
  text item.name
}

// With index
for item, index in items {
  text "{index + 1}. {item.name}"
}

// Filtered iteration
for product in products where product.inStock {
  card { ... }
}
```

### Switch Statements
```mul
switch user.status {
  case "active": text "Active User" success
  case "pending": text "Pending Approval" warning
  case "suspended": text "Account Suspended" error
  default: text "Unknown Status" neutral
}
```

## Platform Targets

MUL compiles to multiple target platforms:

### Web (HTML/CSS/JS)
```mul
button "Click Me" primary
```
Generates:
```html
<button class="btn btn-primary">Click Me</button>
```

### React
```mul
button "Click Me" primary
```
Generates:
```jsx
<Button variant="primary">Click Me</Button>
```

### React Native
```mul
button "Click Me" primary
```
Generates:
```jsx
<TouchableOpacity style={styles.primaryButton}>
  <Text>Click Me</Text>
</TouchableOpacity>
```

### Flutter
```mul
button "Click Me" primary
```
Generates:
```dart
ElevatedButton(
  onPressed: () {},
  child: Text('Click Me'),
)
```

### SwiftUI
```mul
button "Click Me" primary
```
Generates:
```swift
Button("Click Me") {
  // action
}
.buttonStyle(.borderedProminent)
```

## LLM Integration

### Natural Language Processing
MUL is designed for seamless LLM generation:

**User Prompt:**
> "Create a login form with email, password, and submit button"

**LLM Generated MUL:**
```mul
card elevated rounded spacious {
  title "Sign In" large center
  
  column normal {
    input "email" "Enter your email" required
    input "password" "Password" secret required
    
    button "Sign In" primary large {
      action authenticate
    }
    
    link "Forgot password?" "forgot-password"
  }
}
```

### Intent Recognition
LLMs can understand intent and generate appropriate MUL:
- "Dashboard with stats" â†’ Grid layout with metric cards
- "User profile" â†’ Card with avatar, name, and details
- "Shopping cart" â†’ List with items and checkout button
- "Settings page" â†’ Form with various input types

### Context Awareness
```mul
// LLM understands this is a dark theme dashboard
page "Admin Dashboard" dark {
  // All subsequent elements adapt to dark theme
  section "metrics" {
    // Metric cards automatically styled for dark theme
  }
}
```

## Examples

### E-commerce Product Page
```mul
page "Product Details" {
  section "header" {
    row spacious {
      title "Wireless Headphones" huge bold
      text "$99.99" success large bold
    }
  }
  
  row loose {
    column {
      image "product-main.jpg" large rounded
      row {
        image "thumb1.jpg" small
        image "thumb2.jpg" small  
        image "thumb3.jpg" small
      }
    }
    
    column spacious {
      text "Premium wireless headphones with noise cancellation"
      
      section "options" {
        text "Color:" bold
        row {
          button "Black" outlined
          button "White" outlined active  
          button "Blue" outlined
        }
      }
      
      row loose {
        button "Add to Cart" primary large
        button "â™¡" outlined large
      }
    }
  }
  
  section "details" {
    title "Product Details" large
    text "High-quality audio with 30-hour battery life..."
  }
}
```

### Admin Dashboard
```mul
page "Admin Dashboard" dark {
  section "header" primary {
    row spacious {
      title "Dashboard" huge bold
      row {
        button "Export" secondary
        button "Settings" secondary
      }
    }
  }
  
  grid "2x2" loose {
    card elevated {
      icon "users" large primary
      title "Total Users" 
      text "12,345" huge bold success
      text "+12% from last month" small secondary
    }
    
    card elevated {
      icon "dollar-sign" large success
      title "Revenue"
      text "$45,678" huge bold primary  
      text "+8% from last month" small secondary
    }
    
    card elevated {
      icon "shopping-cart" large warning
      title "Orders"
      text "1,234" huge bold
      text "+15% from last month" small secondary
    }
    
    card elevated {
      icon "trending-up" large accent
      title "Conversion"
      text "3.4%" huge bold
      text "+2% from last month" small secondary
    }
  }
  
  section "recent" {
    title "Recent Activity" large
    
    list {
      for activity in recentActivity {
        row spacious {
          icon activity.type small
          column {
            text activity.description
            text activity.timestamp small secondary
          }
          text activity.status success small
        }
      }
    }
  }
}
```

### Mobile-First Design
```mul
page "Mobile App" {
  section "header" primary mobile-only {
    row spacious {
      button "â˜°" flat
      title "App Name" 
      button "ðŸ‘¤" flat
    }
  }
  
  // Desktop sidebar
  panel "sidebar" desktop-only {
    column {
      link "Dashboard" active
      link "Products"
      link "Orders"
      link "Settings"
    }
  }
  
  section "main" {
    // Responsive grid
    grid responsive {
      mobile: "1x4"
      tablet: "2x2"
      desktop: "4x1"
    } {
      card elevated {
        title "Sales" center
        text "$12,345" huge bold center success
      }
      card elevated {
        title "Orders" center
        text "456" huge bold center primary
      }
      card elevated {
        title "Customers" center  
        text "789" huge bold center
      }
      card elevated {
        title "Products" center
        text "123" huge bold center
      }
    }
  }
}
```

## Implementation Guidelines

### Parser Requirements
- **Tokenization**: Handle strings, identifiers, keywords, braces
- **AST Generation**: Build hierarchical abstract syntax tree
- **Error Recovery**: Continue parsing after syntax errors
- **Source Mapping**: Maintain line/column information for debugging

### Renderer Architecture
```
MUL Source â†’ Parser â†’ AST â†’ Platform Renderer â†’ Target Code
```

### Platform Renderer Interface
```typescript
interface PlatformRenderer {
  render(ast: MULNode): string;
  renderElement(element: MULElement): string;
  applyModifiers(element: MULElement, modifiers: string[]): string;
}
```

### Extensibility Points
- **Custom Elements**: Register new element types
- **Custom Modifiers**: Add platform-specific modifiers
- **Custom Actions**: Define application-specific actions
- **Themes**: Override default styling systems

### Performance Considerations
- **AST Caching**: Cache parsed AST for repeated renders
- **Incremental Updates**: Only re-render changed subtrees
- **Lazy Loading**: Load platform renderers on demand
- **Bundle Splitting**: Separate core from platform-specific code

### Testing Strategy
- **Parser Tests**: Verify AST generation for various inputs
- **Renderer Tests**: Ensure correct output for each platform
- **Integration Tests**: Full MUL â†’ rendered UI validation
- **LLM Tests**: Verify AI-generated MUL compiles correctly

## File Format

- **Extension**: `.mul`
- **Encoding**: UTF-8
- **Line Endings**: Platform agnostic (LF preferred)

### Reserved Keywords

**Element types:**
```
page, section, card, panel, row, column, grid, stack, wrap
text, title, subtitle, label, link
button, input, toggle, slider, select, option
image, icon, video
list, table, item, cell, header
```

**Control flow:**
```
if, else, for, in, where, switch, case, default
```

**Modifiers:**
```
tiny, small, medium, large, huge
primary, secondary, accent, success, warning, error, neutral
bold, italic, underline, rounded, sharp, elevated, flat
center, left, right, top, bottom, stretch
tight, normal, loose, spacious
active, inactive, disabled, hidden, visible, loading
mobile, tablet, desktop
```

### Identifier Rules
- **Variables**: camelCase or snake_case
- **Element IDs**: kebab-case preferred
- **Actions**: camelCase function style

### Error Handling
- **Graceful degradation**: Unknown elements render as generic containers
- **Missing properties**: Default values used
- **Invalid modifiers**: Ignored with optional warnings
- **Syntax errors**: Specific error messages with line numbers

## Contributing

We welcome contributions to MUL! Please read our [Contributing Guidelines](CONTRIBUTING.md) before submitting pull requests.

### Areas for Contribution
- Parser implementation
- Platform renderers
- Documentation improvements
- Example applications
- Testing and bug fixes

## Roadmap

### Current Version: v0.4.0 (May 2025)
- âœ… Core element set defined
- âœ… Modifiers system established
- âœ… Basic control flow support
- âœ… Multi-platform targeting
- âœ… LLM optimization features

### Planned Features
- [ ] Animation and transition support
- [ ] Advanced theming system
- [ ] Custom component definitions
- [ ] Import/export system
- [ ] State management integration
- [ ] Event handling expansion
- [ ] Accessibility features
- [ ] Internationalization support
- [ ] Stable API freeze
- [ ] Production-ready tooling
- [ ] Comprehensive documentation
- [ ] Plugin ecosystem

## License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

**MUL v0.4.0** - A semantic UI language for the AI era.

*This specification is a living document and will evolve based on community feedback and implementation experience.*
